{# app/templates/admin/parent/edit_bs5.html #}
{% extends 'admin/model/edit.html' %}

{% block head_css %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin/admin_custom.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pages/parents.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin/previews/parent_preview.css') }}">
{% endblock %}

{% block body %}
<div class="container-fluid mt-4">
    <div class="row">
        {# Admin Form Column #}
        <div class="col-lg-6">
            {{ super() }}
        </div>

        {# Live Preview Column #}
        <div class="col-lg-6">
            <div class="live-preview-container">
                <h3>Live Preview</h3>
                <div class="parent-name-banner">
                    <h1 id="preview-parent-name" class="display-5 text-white text-uppercase text-center py-3">{{ model.name or 'Parent Name' }}</h1>
                </div>
                <div class="container my-5">
                    <div class="row g-4 parent-layout-container">
                        <div class="col-md-12 parent-image-column">
                            <div id="live-preview-carousel" class="carousel slide parent-carousel-wrapper">
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img id="preview-parent-image" src="{{ model.main_image_s3_key | s3_url or url_for('static', filename='img/placeholder.jpg') }}" class="d-block w-100 carousel-image" alt="Main image preview">
                                    </div>
                                    <div class="carousel-item">
                                        <img id="preview-alt-image-1" src="{{ model.alternate_image_s3_key_1 | s3_url or url_for('static', filename='img/placeholder.jpg') }}" class="d-block w-100 carousel-image" alt="Alt image 1 preview">
                                    </div>
                                    <div class="carousel-item">
                                        <img id="preview-alt-image-2" src="{{ model.alternate_image_s3_key_2 | s3_url or url_for('static', filename='img/placeholder.jpg') }}" class="d-block w-100 carousel-image" alt="Alt image 2 preview">
                                    </div>
                                    <div class="carousel-item">
                                        <img id="preview-alt-image-3" src="{{ model.alternate_image_s3_key_3 | s3_url or url_for('static', filename='img/placeholder.jpg') }}" class="d-block w-100 carousel-image" alt="Alt image 3 preview">
                                    </div>
                                     <div class="carousel-item">
                                        <img id="preview-alt-image-4" src="{{ model.alternate_image_s3_key_4 | s3_url or url_for('static', filename='img/placeholder.jpg') }}" class="d-block w-100 carousel-image" alt="Alt image 4 preview">
                                    </div>
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#live-preview-carousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button>
                                <button class="carousel-control-next" type="button" data-bs-target="#live-preview-carousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button>
                            </div>
                        </div>
                        <div class="col-md-12 parent-info-column">
                            <div class="text-center mt-md-0 mt-4">
                                <h3 class="breed-header" id="preview-parent-breed">{{ model.breed or 'Breed' }}</h3>
                                <p class="weight-header" id="preview-parent-weight">
                                    {%- if model.weight_kg %}{{ model.weight_kg }} kg / {{ (model.weight_kg * 2.20462)|round(1) }} lbs{% else %}Weight: N/A{% endif -%}
                                </p>
                            </div>
                            <div class="description-paragraphs mt-4" id="preview-parent-description">
                                {%- if model.description %}{% for p in model.description.split('\n') if p.strip() %}<p>{{ p.strip() }}</p>{% endfor %}{% endif -%}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block tail %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/previews/parent_preview.js') }}"></script>
{% endblock %}